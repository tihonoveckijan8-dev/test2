:root{
  --bg:#eaf6ff;               /* светлый фон */
  --panel-bg: rgba(255,255,255,0.65);
  --glass-border: rgba(120,170,255,0.35);
  --accent1:#0b66ff;         /* насыщенный синий */
  --accent2:#4da6ff;         /* светлый синий */
  --text:#04203a;            /* тёмно-синий текст */
  --muted:#3b6b8f;           /* приглушённый синий */
  --glass-noise: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="n"><feTurbulence baseFrequency="0.9" numOctaves="1" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.02"/></svg>');
  --radius:14px;
  --shadow: 0 10px 30px rgba(6,30,60,0.12);
}

/* Reset */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg,#eaf6ff 0%, #d9f0ff 50%, #cfe9ff 100%);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding:18px;
}

/* Glass base */
.glass{
  background: linear-gradient(180deg, rgba(255,255,255,0.72), rgba(245,252,255,0.6));
  border: 1px solid var(--glass-border);
  border-radius: var(--radius);
  padding:12px;
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  box-shadow: var(--shadow);
  background-image: var(--glass-noise);
}

/* Topbar */
.topbar{
  display:flex;
  gap:12px;
  align-items:center;
  padding:12px;
  margin-bottom:16px;
}
.brand{display:flex;gap:12px;align-items:center}
.logo-glass{
  width:56px;height:56px;border-radius:12px;
  background: linear-gradient(135deg, rgba(11,102,255,0.12), rgba(77,166,255,0.06));
  border:1px solid rgba(11,102,255,0.18);
  box-shadow: 0 8px 30px rgba(6,30,60,0.08), inset 0 1px 0 rgba(255,255,255,0.6);
  backdrop-filter: blur(8px) saturate(120%);
}
.brand-text h1{margin:0;font-size:18px;color:var(--text)}
.subtitle{margin:0;font-size:12px;color:var(--muted)}

/* Tabs */
.tabs{
  display:flex;
  gap:8px;
  margin-left:18px;
  overflow:auto;
  padding:6px;
  flex:1;
  align-items:center;
}
.tab{
  white-space:nowrap;
  padding:10px 14px;
  border-radius:12px;
  border:1px solid rgba(11,102,255,0.06);
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  font-weight:700;
  transition: all 180ms ease;
}
.tab:hover{transform:translateY(-3px)}
.tab.active{
  background: linear-gradient(90deg, rgba(11,102,255,0.12), rgba(77,166,255,0.08));
  color:var(--text);
  box-shadow: 0 8px 24px rgba(11,102,255,0.06);
  border:1px solid rgba(11,102,255,0.18);
}

/* Layout */
.main-grid{
  display:grid;
  grid-template-columns: 1fr 300px;
  gap:18px;
  align-items:start;
}

/* Content panel */
.content-panel{min-height:60vh;padding:18px}
.content-inner{max-width:980px;margin:0 auto}
.theory{color:var(--text);line-height:1.6;margin-bottom:18px}

/* Quiz */
.quiz h3{margin-top:0;color:var(--accent1)}
.quiz-questions .question{padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(245,252,255,0.8));margin-bottom:10px;border:1px solid rgba(11,102,255,0.04)}
.choice{display:flex;gap:10px;align-items:flex-start}
.choice input{margin-top:6px}
.quiz-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}

/* Sidebar */
.sidebar h3{margin-top:0;color:var(--accent1)}
.toc{list-style:none;padding:0;margin:0;max-height:60vh;overflow:auto}
.toc li{padding:10px;border-radius:10px;color:var(--muted);cursor:pointer}
.toc li:hover,.toc li.active{background:linear-gradient(90deg, rgba(11,102,255,0.06), rgba(77,166,255,0.04));color:var(--text)}

/* Buttons */
.btn{
  background:transparent;border:1px solid rgba(11,102,255,0.08);color:var(--text);
  padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700;
}
.btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));border:none;color:#fff}
.btn.danger{background:linear-gradient(90deg,#ff6b6b,#ff8a6b);border:none;color:#fff}

/* Modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(2,6,23,0.12), rgba(2,6,23,0.18));padding:20px}
.modal.show{display:flex}
.modal-panel{width:min(920px,95%);max-height:85vh;overflow:auto;padding:18px}
.modal-header{display:flex;justify-content:space-between;align-items:center}
.history-list{margin-top:12px;display:grid;gap:8px}

/* Mobile */
.mobile-only{display:none}
@media (max-width:900px){
  .main-grid{grid-template-columns:1fr}
  .sidebar{order:2}
  .tabs{display:none}
  .mobile-only{display:inline-block}
  .top-actions{display:flex;gap:8px}
}

/* Accessibility focus */
.tab:focus, .btn:focus, .toc li:focus {outline:2px solid rgba(77,166,255,0.18);outline-offset:2px}

/* Fallback for browsers without backdrop-filter */
@supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))){
  .glass{background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(245,252,255,0.88));}
}
